@startuml TempoSage_Use_Case_Diagram
!theme plain

' Configuración OPTIMIZADA - Relación de aspecto 2:3 (dimensiones físicas: 2000x3000px)
!define DPI 400
scale max 2000 width
scale max 3000 height

skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 28
skinparam usecaseFontSize 27
skinparam actorFontSize 30
skinparam packageFontSize 28

' Colores específicos para actores
skinparam actor {
    BackgroundColor #E3F2FD
    BorderColor #1976D2
    FontColor #0D47A1
}

' Colores para diferentes tipos de funcionalidades
skinparam package {
    BackgroundColor<<Core>> #E8F5E8
    BorderColor<<Core>> #388E3C
    FontColor<<Core>> #1B5E20
}

skinparam package {
    BackgroundColor<<Management>> #FFF3E0
    BorderColor<<Management>> #F57C00
    FontColor<<Management>> #E65100
}

skinparam package {
    BackgroundColor<<Intelligence>> #F3E5F5
    BorderColor<<Intelligence>> #7B1FA2
    FontColor<<Intelligence>> #4A148C
}

skinparam package {
    BackgroundColor<<System>> #FFEBEE
    BorderColor<<System>> #C62828
    FontColor<<System>> #B71C1C
}

skinparam usecase {
    BackgroundColor<<Core>> #C8E6C9
    BorderColor<<Core>> #2E7D32
    FontColor<<Core>> #1B5E20
}

skinparam usecase {
    BackgroundColor<<Management>> #FFE0B2
    BorderColor<<Management>> #FB8C00
    FontColor<<Management>> #E65100
}

skinparam usecase {
    BackgroundColor<<Intelligence>> #E1BEE7
    BorderColor<<Intelligence>> #8E24AA
    FontColor<<Intelligence>> #4A148C
}

skinparam usecase {
    BackgroundColor<<System>> #FFCDD2
    BorderColor<<System>> #D32F2F
    FontColor<<System>> #B71C1C
}

title Diagrama de Casos de Uso - TempoSage\nFuncionalidades del Sistema

' ===========================================
' ACTORES
' Según la descripción del documento:
' - Usuario: Persona que utiliza la aplicación
' - Sistema de IA: Componente que proporciona recomendaciones inteligentes
' - Base de Datos Local: Almacenamiento persistente de datos
' ===========================================
actor "Usuario" as user
actor "Sistema de IA" as ai_system
actor "Base de Datos\nLocal" as database

' ===========================================
' SISTEMA PRINCIPAL
' ===========================================
rectangle "TempoSage System" {
    
    ' AUTENTICACIÓN (Caso de uso principal #1 según descripción)
    package "Autenticación" <<System>> as auth {
        usecase "Registrar Usuario" <<System>> as UC_RegisterUser
        usecase "Iniciar Sesión" <<System>> as UC_Login
        usecase "Cerrar Sesión" <<System>> as UC_Logout
    }
    
    ' GESTIÓN DE ACTIVIDADES (Caso de uso principal #2)
    package "Gestión de Actividades" <<Management>> as activities {
        usecase "Crear Actividad" <<Management>> as UC_CreateActivity
        usecase "Editar Actividad" <<Management>> as UC_EditActivity
        usecase "Completar Actividad" <<Management>> as UC_CompleteActivity
        usecase "Cancelar Actividad" <<Management>> as UC_CancelActivity
        usecase "Listar Actividades" <<Core>> as UC_ListActivities
    }
    
    ' GESTIÓN DE HÁBITOS (Caso de uso principal #3)
    package "Gestión de Hábitos" <<Management>> as habits {
        usecase "Crear Hábito" <<Management>> as UC_CreateHabit
        usecase "Editar Hábito" <<Management>> as UC_EditHabit
        usecase "Eliminar Hábito" <<Management>> as UC_DeleteHabit
        usecase "Marcar Hábito\nCompletado" <<Management>> as UC_CompleteHabit
        usecase "Ver Estadísticas\nde Hábitos" <<Core>> as UC_ViewHabitStats
    }
    
    ' GESTIÓN DE TIME BLOCKS (Caso de uso principal #4)
    package "Gestión de Time Blocks" <<Core>> as timeblocks {
        usecase "Generar Bloques\nAutomáticos" <<Intelligence>> as UC_GenerateBlocks
        usecase "Crear Time Block" <<Management>> as UC_CreateTimeBlock
        usecase "Editar Time Block" <<Management>> as UC_EditTimeBlock
        usecase "Ver Calendario" <<Core>> as UC_ViewCalendar
    }
    
    ' CONSULTA DE RECOMENDACIONES (Caso de uso principal #5)
    package "Recomendaciones IA" <<Intelligence>> as recommendations {
        usecase "Obtener\nRecomendaciones" <<Intelligence>> as UC_GetRecommendations
        usecase "Sugerir Tiempo\nÓptimo" <<Intelligence>> as UC_SuggestOptimalTime
        usecase "Predecir\nProductividad" <<Intelligence>> as UC_PredictProductivity
    }
    
    ' ANÁLISIS DE PRODUCTIVIDAD (Caso de uso principal #6)
    package "Dashboard" <<Core>> as dashboard {
        usecase "Ver Dashboard" <<Core>> as UC_ViewDashboard
        usecase "Analizar\nProductividad" <<Intelligence>> as UC_AnalyzeProductivity
        usecase "Ver Progreso\nMetas" <<Core>> as UC_ViewGoalProgress
    }
    
    ' EXPORTACIÓN DE DATOS (Caso de uso principal #7)
    package "Sincronización" <<System>> as sync {
        usecase "Exportar Datos" <<System>> as UC_ExportData
        usecase "Importar Datos" <<System>> as UC_ImportData
        usecase "Sincronizar con\nCalendario" <<System>> as UC_SyncCalendar
    }
    
    ' CONFIGURACIÓN
    package "Configuración" <<System>> as settings {
        usecase "Configurar\nPreferencias" <<System>> as UC_ConfigPrefs
        usecase "Gestionar\nCategorías" <<Management>> as UC_ManageCategories
        usecase "Configurar\nNotificaciones" <<System>> as UC_ConfigNotifications
    }
    
    ' NOTIFICACIONES
    package "Notificaciones" <<System>> as notifications {
        usecase "Programar\nRecordatorios" <<System>> as UC_ScheduleReminders
        usecase "Enviar\nNotificaciones" <<System>> as UC_SendNotifications
    }
}

' ===========================================
' RELACIONES ACTORES CON CASOS DE USO
' ===========================================

' AUTENTICACIÓN (Usuario y Base de Datos)
user --> UC_RegisterUser
user --> UC_Login
user --> UC_Logout
database --> UC_RegisterUser
database --> UC_Login

' GESTIÓN DE ACTIVIDADES (Usuario y Base de Datos)
user --> UC_CreateActivity
user --> UC_EditActivity
user --> UC_CompleteActivity
user --> UC_CancelActivity
user --> UC_ListActivities
database --> UC_CreateActivity
database --> UC_EditActivity

' GESTIÓN DE HÁBITOS (Usuario)
user --> UC_CreateHabit
user --> UC_EditHabit
user --> UC_DeleteHabit
user --> UC_CompleteHabit
user --> UC_ViewHabitStats

' GESTIÓN DE TIME BLOCKS (Usuario y Base de Datos)
user --> UC_CreateTimeBlock
user --> UC_EditTimeBlock
user --> UC_ViewCalendar
database --> UC_CreateTimeBlock
database --> UC_EditTimeBlock

' DASHBOARD (Usuario)
user --> UC_ViewDashboard
user --> UC_AnalyzeProductivity
user --> UC_ViewGoalProgress

' CONSULTA DE RECOMENDACIONES (Usuario y Sistema de IA)
user --> UC_GetRecommendations
ai_system --> UC_GetRecommendations
ai_system --> UC_SuggestOptimalTime
ai_system --> UC_PredictProductivity

' EXPORTACIÓN DE DATOS (Usuario y Base de Datos)
user --> UC_ExportData
user --> UC_ImportData
user --> UC_SyncCalendar
database --> UC_ExportData
database --> UC_ImportData

' CONFIGURACIÓN (Usuario)
user --> UC_ConfigPrefs
user --> UC_ManageCategories
user --> UC_ConfigNotifications

' ===========================================
' RELACIONES INCLUDE/EXTEND
' ===========================================

' Includes (siempre se ejecutan)
UC_CreateHabit ..> UC_GenerateBlocks : <<include>>
UC_CreateActivity ..> UC_GenerateBlocks : <<include>>
UC_GenerateBlocks ..> UC_ScheduleReminders : <<include>>
UC_ViewDashboard ..> UC_AnalyzeProductivity : <<include>>
UC_GetRecommendations ..> UC_ViewDashboard : <<include>>

' Extends (opcionales)
UC_GetRecommendations ..> UC_SuggestOptimalTime : <<extend>>
UC_AnalyzeProductivity ..> UC_PredictProductivity : <<extend>>

@enduml
